apiVersion: anywhere.eks.amazonaws.com/v1alpha1
kind: Cluster
metadata:
  name: eksa-gitops-workload-140-snow
  namespace: default
spec:
  clusterNetwork:
    cniConfig:
      cilium: {}
    pods:
      cidrBlocks:
      - 192.168.0.0/16
    services:
      cidrBlocks:
      - 10.96.0.0/12
  controlPlaneConfiguration:
    count: 1
    endpoint:
      host: "192.168.1.204"
    machineGroupRef:
      kind: TinkerbellMachineConfig
      name: eksa-aio-mc-wl-140-sn
  datacenterRef:
    kind: TinkerbellDatacenterConfig
    name: eksa-aio-dcc-wl-140-sn
  kubernetesVersion: "1.28"
  managementCluster:
    name: eksa-gitops-mgmt-multinode-snow
---
apiVersion: anywhere.eks.amazonaws.com/v1alpha1
kind: TinkerbellDatacenterConfig
metadata:
  name: eksa-aio-dcc-wl-140-sn
  namespace: default
spec:
  # This is the IP used for load balancing all the Tinkerbell components that are transferred to the actual
  # cluster from bootstrap cluster and this should be in the same subnet as the control-plane vip provided above
  tinkerbellIP: "192.168.1.209"
  osImageURL: "http://192.168.1.80:9900/ubuntu-2204-eng-v1.28.7-kernerl-5.15.0-102-generic.gz"
  hookImagesURLPath: "http://192.168.1.80:9900/hook"

---
apiVersion: anywhere.eks.amazonaws.com/v1alpha1
kind: TinkerbellMachineConfig
metadata:
  name: eksa-aio-mc-wl-140-sn
  namespace: default
spec:
  hardwareSelector:
    type: sn-140
  osFamily: ubuntu
  users:
  - name: ec2-user
    sshAuthorizedKeys:
    - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDW++FyikaFHJ7Hww73re0KnKGPpdjRyaANMlZHU8fie7uu78RIxESy7DCbxSKIjZ9n9EtclXp8YvM+/P+SOMaZ3rz9f2EYo+A3sLUSOX82UeVjezixbgGF9xV2KsJbFRbO+RYOyUCpDG0x7xxBNR+7tZ4E2EYNIzghwM/Keug9qRd3WwW9RpRlPaw6oZLhI+tG7nlgJ4iEknG+FC5jvKyrjyyCXqFZUP5zPGfHnwKgYjFMUHJpwugi6f71oPVtyHQpSaRxlF1TEEyyuy27LRVVdUOxWjdbmOyA8BoCXjD14hcbTLus8TI5QpwUXzrfW3woHqUKILoAzFa+Av9W+K/0VENZ87xsYCU1eSsKcrkwEc89D68LAgiRfuLhhaxymR2iVoNmAFO5BG/HwfPMWIs9Tp10diSRgplN+u5sPawHVIUd0R99HdFahMcMAnH2t66iCXEYMnjMTmlAQzcw8xjqUIfiFdDoAER0FetDFp/tAHVB1/bfTrRNRrUE1rrn8pnY/eTj79vUSxgJCxVkbsI+XcHDxTIjjtECW8C5FDYh9O64AucNFpxUKNMe2otTfxFIp/wSGkq37ar6xy8UBibg2egcgkr60i0jsYWpXV+/S0ir8bs3buMmcC6QfHSE1gIpTJycaScVw4g/2EKiQBhV2vIzvzjqe9n7+LfnmI40uw==
