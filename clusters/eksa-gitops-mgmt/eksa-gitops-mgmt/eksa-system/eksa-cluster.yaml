apiVersion: anywhere.eks.amazonaws.com/v1alpha1
kind: Cluster
metadata:
  name: eksa-gitops-mgmt
  namespace: default
spec:
  clusterNetwork:
    cniConfig:
      cilium: {}
    pods:
      cidrBlocks:
      - 192.168.0.0/16
    services:
      cidrBlocks:
      - 10.96.0.0/12
  controlPlaneConfiguration:
    count: 1
    endpoint:
      host: 192.168.1.95
    machineGroupRef:
      kind: TinkerbellMachineConfig
      name: eksa-aio-mc
  datacenterRef:
    kind: TinkerbellDatacenterConfig
    name: eksa-aio-dcc
  eksaVersion: v0.18.0
  gitOpsRef:
    kind: FluxConfig
    name: my-github-flux-provider
  kubernetesVersion: "1.26"
  machineHealthCheck:
    nodeStartupTimeout: 20m0s
    unhealthyMachineTimeout: 5m0s
  managementCluster:
    name: eksa-gitops-mgmt

---
apiVersion: anywhere.eks.amazonaws.com/v1alpha1
kind: TinkerbellDatacenterConfig
metadata:
  name: eksa-aio-dcc
  namespace: default
spec:
  hookImagesURLPath: http://192.168.1.80:9900/hook
  osImageURL: http://192.168.1.80:9900/ubuntu-2204-eng-v1.26.6-kernerl-5.15.0-76-generic.gz
  tinkerbellIP: 192.168.1.96

---
apiVersion: anywhere.eks.amazonaws.com/v1alpha1
kind: TinkerbellMachineConfig
metadata:
  annotations:
    anywhere.eks.amazonaws.com/control-plane: "true"
  name: eksa-aio-mc
  namespace: default
spec:
  hardwareSelector:
    type: aio
  osFamily: ubuntu
  templateRef: {}
  users:
  - name: ec2-user
    sshAuthorizedKeys:
    - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDO8d5Gi6hBwr0A4rRyV6C+tfKBbgVtzLtNJUD56+uU5fDjxh47WuqkmOAbLKKMuHiS9ILzg4xjDxlpTL2lveCBUK2Ybn9TyKuf6R5S5O32zaY55qxvOu5SP2Su53KgVNZi0QHQIhKbTQIMoGxoltVpgWRuvNONl8Ofio/Sdxg038bjOhdfCF6mmB+ctHGar/swqwcE9DzTf2c97jaJRqQbX0vs1s0wiw0aU27f/ihCHH91zglqKsb5z2x+RPxklD4IFImgYMLh4U7MjlcK43lDZM/8ahWf18tJv9S8typ+aFSwWiuG78cZfHzLIDfx7mfIIiw3KmpmocwBQdLaSvNcg7Y/qeO4gVWxzlh52tZSLLH87r5JQAPs0qsJmVfgKegvzXRRBT4860J0+YuuMGrbBSl2ncQUIGvkX1I8ixTUqvncOHLN6Flz/P/mGKFXnaET3C0VtaoZZ1sYmSPCIP++iTi2GtgsKvefmQYlP0hx09hXj7Raa2tZ+LKMidi3NrrkZzXPNXW5f+ezHVnNWlWXD3zc3W57TBxfIdAFByQtD7OD+ev5/dFd9/6ybUuz9WVmsZvqnzi1HXEam2QUvN3AXPsU+Npe7esU7qqRjxZslJ4WwXD812UX7BM/T+4aNlIOdCQxz9x4DvAlXFockLOCuVMsmccdzygIWIA8q5a7qQ==

---
apiVersion: anywhere.eks.amazonaws.com/v1alpha1
kind: FluxConfig
metadata:
  name: my-github-flux-provider
  namespace: default
spec:
  branch: main
  clusterConfigPath: clusters/eksa-gitops-mgmt
  github:
    owner: Cheng-Ian-Liu
    personal: true
    repository: eks-a-gitops
  systemNamespace: flux-system

---
